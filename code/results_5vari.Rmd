---
title: "resulst_5vari"
author: "Jack"
date: "2023-02-04"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(readxl)
allsites4a <- read_excel("~/Documents/R/hons_local_r/allsites4a.xlsx")
View(allsites4a) 
```


```{r}
glimpse(allsites4a)
```
```{r}
class(allsites4a$ID)
```

#is character change to 

```{r}
unique(allsites4a$ID)
```

#change ID to factor 

```{r}
allsites4a$ID <- as.factor(allsites4a$ID)
```


```{r}
class(allsites4a$ID)
```

#now ID is factor

```{r}
levels(allsites4a$ID)
```
#i.e no order in sites as factor 

#missing data- will exclude na values as na don't mean anything for this data as tri or height difference can't be na it would be 0 or -0.1 etc.

```{r}
canopy_nar <- na.omit(allsites4a)
```

```{r}
length(canopy_nar$ID)
```
#i.e 399997 results so 3 na values removed (also shows good quality data as very little na values)


```{r}
mean(canopy_nar$tri)
```
#i.e 0.4691957 getting real values now 


```{r}
canopy_nar %>%
  ggplot(aes(x=canopy_diff, y=tri)) +
  geom_point()
```

```{r}
canopy_nar %>%
  ggplot(aes(x=dem_error, y=tri)) +
  geom_point()
```

```{r}
canopy_nar %>%
  ggplot(aes(x=fpc_diff, y=tri)) +
  geom_point()
```


```{r}
summary(canopy_nar$tri)
```
#Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#0.1115  0.4104  0.4857  0.4692  0.5458  0.8814 

```{r}
summary(canopy_nar$canopy_diff)
```
#Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#-67.235   0.000   0.008   1.485   1.241  63.903 


```{r}
summary(canopy_nar$fpc_diff)
```
# Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
#-100.000    0.000    0.000    1.648    1.000  100.000 

```{r}
summary(canopy_nar$avg_1st_return)
```
# Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
# 0.000   1.111   1.444   1.975   2.222  26.889 

```{r}
summary(canopy_nar$dem_error)
```
#Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
#-65.49298  -0.04504   0.09900   0.02319   0.16901 221.08600 



```{r}
std <- function(x) sd(x)/sqrt(length(x))
```

```{r}
std(canopy_nar$dem_error )
```
#sd canopy_nar$dem_error 0.003433617

```{r}
print(sqrt(sum((canopy_nar$dem_error - mean(canopy_nar$dem_error)) ^ 2/(length(canopy_nar$dem_error) - 1)))
      /sqrt(length(canopy_nar$dem_error)))
```
#se other method  canopy_nar$dem_error  0.003433617

```{r}
std(canopy_nar$avg_1st_return )
```
#canopy_nar$avg_1st_return )

```{r}
std(canopy_nar$fpc_diff )
```
#0.01605804


```{r}
std(canopy_nar$canopy_diff )
```
#0.006836824


```{r}
std(canopy_nar$tri )
```
#0.0001905845




```{r}
hist(canopy_nar$tri, xlab = "tri", main = NULL)
```
```{r}
hist(canopy_nar$avg_1st_return, xlab = "avg_1st_return", main = NULL)
```

```{r}
hist(canopy_nar$fpc_diff, xlab = "fpc_diff", main = NULL)
```

```{r}
hist(canopy_nar$canopy_diff, xlab = "canopy_diff", main = NULL)
```

```{r}
hist(canopy_nar$dem_error, xlab = "dem_error", main = NULL)

```

```{r}
canopy_nar %>%
  ggplot(aes(x=avg_1st_return, y=tri)) +
  geom_point()
```
#lid 2 avg 1st return, filter say tri at 0.1 = low error in dme or fpc, or camopy, then high say 0.8 = mabye mroe error
#then a multivariate way of displaying
#mabye hex method 
```{r}
lidarovlbara_Merge_TableToExcel <- read_excel("~/Documents/R/hons_local_r/update/v2/lidarovlbara_Merge_TableToExcel.xlsx")
```


```{r}
unique(lidarovlbara_Merge_TableToExcel$ID)
```

```{r}
lidarovlbara_Merge_TableToExcel$ID <- as.factor(lidarovlbara_Merge_TableToExcel$ID)
```

```{r}
class(lidarovlbara_Merge_TableToExcel$ID)
```

```{r}
canopy_nar_update <- na.omit(lidarovlbara_Merge_TableToExcel)
```

```{r}
std(canopy_nar_update$dem_error )
```
```{r}
levels(canopy_nar_update$ID) <- c('Baradine', 'Goondiwindi', 'Gwabegar', 'Katoomba')
```


```{r}
ggplot(canopy_nar_update, aes(x = fpcdiff_1, y = tri_1, color =ID))+
  geom_point(size=0.5, shape=20)+
  geom_smooth(method=lm, color="brown2") +
  ggtitle("Relationship between TRI and FPC Error") +
  xlab("FPC Error (m)") + ylab("TRI")+
  labs(color = "Study Area")                     
  
  
```

#export values
```{r}
write.csv(canopy_nar_update2, "~/Documents/R/git/hons/terrain_roughness/data/file dame2.csv", row.names=FALSE)
```


#now use update6factorsdata2

```{r}
ggplot(update6factorsdata2, aes(x = dem_error, y = tri_1, color =ID))+
  geom_point(size=0.5, shape=20)+
  geom_smooth(method=lm, color="brown2") +
  ggtitle("Relationship between TRI and DEM Error") +
  xlab("DEM Error (m)") + ylab("TRI")+
  labs(color = "Study Area")    
```
```{r}
ggplot(update6factorsdata2, aes(x = canopy_diff_1, y = tri_1, color =ID))+
  geom_point(size=0.5, shape=20)+
  geom_smooth(method=lm, color="brown2") +
  ggtitle("Relationship between TRI and Canopy Error") +
  xlab("Canopy Error (m)") + ylab("TRI")+
  labs(color = "Study Area")  
```
#now compare lid2 diff
```{r}
ggplot(update6factorsdata2, aes(x = canopy_diff_1, y = lid2avgfirstreturn, color =ID))+
  geom_point(size=0.5, shape=20)+
  geom_smooth(method=lm, color="brown2") +
  ggtitle("Relationship between LiDAR 2 Average First Return and Canopy Error") +
  xlab("Canopy Error (m)") + ylab("LiDAR 2 Average First Return")+
  labs(color = "Study Area")  
```


